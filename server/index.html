<!doctype html>
<html>
  <head>
    <script src='jquery-1.9.1.js'></script>
    <script>
      $(function(){
        $('#submit').click(function() {
          $.get('/exec_cmd', { cmd : $('#command').val(),
                               imagePath : $('#imagePath').val(),
                               toolPath : $('#toolPath').val()})
           .done(function(data) {
              $('#output').val(data);
            });
          });

        $('#clear').click(function() {
          $('#output').val('');
        });
        
        $('#command').keyup(function(event) {
          if (event.keyCode == 13) {
            $('#submit').click();
          }
        })
        
        $('#get_imgs').click(function() {
          $.get('/get_images', null)
           .done(function(res)
           {
             $('#output').val(res.output);
             var all_imgs = res.imgs;
             $('#img_list').empty();
             for(var i = 0; i < all_imgs.length; i++)
             {
               var opt = document.createElement("option");
               opt.text = all_imgs[i];
               opt.value = all_imgs[i];
               $('#img_list').append($('#img_list').add(opt,null));
             }
           });
         });

         $('#select_img').click(function() {
           $.get('/select_image', { img_name : $('#img_list').val() })
            .done(function(res)
            {
              if(res.success)
                alert("Yay success!");
              else
                alert("Boo failure!");
            });
          });
        
        $('#load_db').click(function() {
          $.get('/load_db', null)
           .done(function(res)
           {
             if(res.success)
               alert("Yay success!");
             else
               alert("Boo failure!");
           });
        });
        
      });
    </script>
  </head>
  <body>
    <input type='submit' id='get_imgs' value='Get Images'>
    <select id='img_list'>
    </select>
    <input type='submit' id='select_img' value='Select Image'>
    <input type='submit' id='load_db' value='Create DB File'>
    <div label='input'>
      TSK Tool Path: <input type='text' id='toolPath'><br>
      Image File Path: <input type='text' id='imagePath'><br>
      Command: <input type='text' id='command'><br>
      <!--<select id='cmd'>
        <option value="mount">mount</option>
        <option value="fstools/fsstat">fsstat</option>
        <option value="fstools/blkstat">blkstat</option>
      </select>
      <input type='text' id='target'><br>-->
      <input type='submit' id='submit' value='Send Command'>
      <input type='button' id='clear' value='Clear'>
    </div>
    <div label='results'>
      <textarea readonly id='output' rows='35' cols='60' wrap='off'></textarea>
    </div>
  </body>
</html>
